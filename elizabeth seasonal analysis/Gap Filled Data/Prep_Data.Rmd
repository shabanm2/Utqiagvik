# Prep Data

This file is for loading gap-filled data and renaming the sensors and modifying it so that it can be easily cleaned for plotting and other statistical analysis.


### Set Filepath

List all the files in the folder
```{r}
filepath <- "/Users/emvanmetre/Desktop/Arctic/Gap_Filled_Data/Transposed/"
exportpath <- "/Users/emvanmetre/Desktop/Arctic/Gap_Filled_Data/Transposed/"
filenames <- list.files(filepath, pattern="*.csv", full.names=F)
filenames
```

### Read File
```{r}
file <- "vwc_gap_filled_BEO.csv"
df <- read.csv(paste0(filepath, file))
```


## Sensors

These are the names and corresponding IDs of sensors based on the variable they measure.

### Temperature
```{r}
tempsensors <- c('21393048'='BEO-OLD','21398591'='BEO-OLD','21398585'='BUECI-BASE',
               '21398590'='BUECI-SA','21398583'='BUECI-SB','21393042'='BUECI-SC',
               '21398584'='BUECI-SD','21398579'='BUECI-SE','21398578'='BUECI-SF01',
               '21398598'='BUECI-SF02','21398588'='SSMH-BASE','21398599'='SSMH-SA',
               '21393044'='SSMH-SB','21398576'='SSMH-BASE','21393049'='SSMH-SD',
               '21398594'='SSMH-SE01','21393043'='SSMH-SE02','21398586'='SSMH-SF01',
               '21398580'='SSMH-SF02','21398581'='SSMH-SG','21206939'='TNHA-BASE',
               '21398593'='TNHA-SA','21398587'='TNHA-SB','21393047'='TNHA-SC',
               '21398601'='TNHA-SD','21212510'='TNHA-SE','21398577'='TNHA-??')
```


### VWC
```{r}
vwcsensors <- c('21393048'='BEO-OLD','21398591'='BEO-OLD','21398585'='BUECI-BASE',
                '21398590'='BUECI-SA','21398583'='BUECI-SB','21393042'='BUECI-SC',
                '21398584'='BUECI-SD','21398579'='BUECI-SE','21398578'='BUECI-SF01',
                '21398598'='BUECI-SF02','21398576'='REMOVE','21398588'='SSMH-BASE',
                '21398599'='SSMH-SA','21393044'='SSMH-SB','21393049'='SSMH-SD',
                '21398594'='SSMH-SE01','21393043'='SSMH-SE02','21398586'='SSMH-SF01',
                '21398580'='SSMH-SF02','21398581'='SSMH-SG','21206939'='TNHA-BASE',
                '21398593'='TNHA-SA','21398587'='TNHA-SB','21393047'='TNHA-SC',
                '21398601'='TNHA-SD','21398577'='TNHA-SE')
```



## Create and Select Columns

**Rename Sensors**

```{r}
df_long$fullname <- recode(df_long$sensor, !!!vwcsensors)
df_long$copy <- df_long$fullname
df_long <- cSplit(df_long, 'copy', sep="-", direction = "wide")
colnames(df_long)[6:7] <- c("site", "station")
df_final <- df_long %>% select(Date, sensor, site, station, fullname, depth, value)
```


